

<?php
session_start();
?>
<!DOCTYPE html>
<html lang="en">
<head>
  <title>Bootstrap Example</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
     <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

	
<script type="text/javascript" src="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
				
<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"/>



<script type="text/javascript" src="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>			
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.js"></script>
	
	<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
	<script src="https://kit.fontawesome.com/yourcode.js"></script>
	<!--<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
	<link rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js" integrity="sha384-SR1sx49pcuLnqZUnnPwx6FCym0wLsk5JZuNx2bPPENzswTNFaQU1RDvt3wT4gWFG" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.min.js" integrity="sha384-j0CNLUeiqtyaRmlzUHCPZ+Gy5fQu0dQ6eZ/xAww941Ai1SxSY+0EQqNXNE6DZiVc" crossorigin="anonymous"></script>   --->
    <title>cart</title>
    </head>
<?php 
include "connect.php";

  ?>
<body>
    <div class="container">
        <form action="cart.php" method="post">
    <li class="nav-item">
         <a class="nav-link" 
               type="submit" class="btn btn-white" name="Add_To_Cart" style="color:black" href="blog.php"> Add_cart<i class="fas fa-shopping-cart"></i></a></li>
        </form>
    <div class="row">
        <div class="col-lg-12 text-center border rounded bg-light my-5">
        
        
        <h1>My CART</h1>
            
        </div>
        
        <div class="col-lg-8">
        <table class="table">
            <thead class="text-center">
                
            <tr>
            <th scope="col">Serial No.</th>
          
           <th scope="col">Item Name</th>
            <th scope="col">Item price</th>
            <th scope="col">Quantity</th>
                  <th scope="col"></th>
                
                </tr>
            </thead>
            <tbody class="text-center">
            <?php
               
                    if(isset($_SESSION['cart']))
                {
             foreach($_SESSION['cart'] as $key => $value)
                    {
                        print_r($value);
                 
           echo" <tr>
                 <td>1</td>
                
                <td>$value[Item_Name]</td>
                       <td>$values[price]</td>
                
     <td>
        <input  class='text-center' value='$value[Quantity]' type='number' min='1' max='10' ></td>
    <td>
    <form action='manage-cart.php' method='POST'>
    <button 
     class='btn btn_sm  btn_outline_danger'>REMOVE</button>
     <input type='hidden' name='Item_Name' value='$value[Item_Name]'>
     </form>
     </td>
          </tr>
            ";
            
            
                
     
                }
                }
                
               ?>
            </tbody>
       
            </table>
               
       
        </div>
        
        </div>
    
    </div>
    
   
    
    
    </body>
    
</html>
<?php
     

session_start();

if($_SERVER['REQUEST_METHOD']=="POST")
{
  if(isset($_POST['Add_To_Cart'])) 
      
  {
      
      if(isset($_SESSION['cart'])){
     
        
           $myitems=array_column($_SESSION['cart'],'Item_Name');
         
          if(in_array($_POST['Item_Name'],$myitems))
         
              {
              
         // print_r($_SESSION['cart']);
              
           echo"<script>
      
      alert('Item Already Added');
     window.location.href='cart.php';
      
      </script>";
      
  }else
          {
              
         
              
         
    $count=count($_SESSION['cart']);
      $_SESSION['cart'][$count]=array('Item-Name'=>$_POST['Item_Name'],'price'=>$_POST['price'],'Quantity'=>1);
     
          
        
      
              echo"<script>
      
             alert('Item Already Added');
             window.location.href='cart.php';
      
           </script>";
         
          }
     }
     
   else{
       
   
         
    $_SESSION['cart'][0]=array('Item-Name'=>$_POST['Item_Name'],'price'=>$_POST['price'],'Quantity'=>1);
       
          echo"<script>
      
     alert('Item Added');
     window.location.href='cart.php';
      
     </script>";
      
    }
  
  
  }  
    
  
  }
    if(isset($_POST['Remove_Item']))
    {
        
   
  foreach($_SESSION['cart'] as $key => $value)
  {
      if($value['Item_Name']==$_POST['Item_Name'])
      {
          
     
      unset($_SESSION['cart'][$key]);
     $_SESSION['cart']=array_values($_SESSION['cart']);
          echo"<script>
         
          alert('Item Removed');
          window.location.href='cart.php';
          
         </script>";
  }

}
    }

?>